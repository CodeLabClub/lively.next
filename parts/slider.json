{
  "id": "Morph_40992F4D_0D27_4D7D_AB0E_23BCF8555621",
  "snapshot": {
    "Morph_40992F4D_0D27_4D7D_AB0E_23BCF8555621": {
      "rev": 735589,
      "props": {
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(179.3,41.0)"
        },
        "fill": {
          "key": "fill",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(236,240,241)"
        },
        "name": {
          "key": "name",
          "value": "slider"
        },
        "origin": {
          "key": "origin",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(238.2,886.4)"
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Slider",
            "Morph",
            "morph"
          ]
        },
        "submorphs": {
          "key": "submorphs",
          "value": [
            {
              "__ref__": true,
              "id": "Morph_CBF7F59C_73BE_4531_A372_7D7F8DDF5BC1",
              "rev": 735591
            }
          ]
        },
        "borderColorBottom": {
          "key": "borderColorBottom",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorLeft": {
          "key": "borderColorLeft",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorRight": {
          "key": "borderColorRight",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorTop": {
          "key": "borderColorTop",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderRadiusBottom": {
          "key": "borderRadiusBottom",
          "value": 15
        },
        "borderRadiusLeft": {
          "key": "borderRadiusLeft",
          "value": 15
        },
        "borderRadiusRight": {
          "key": "borderRadiusRight",
          "value": 15
        },
        "borderRadiusTop": {
          "key": "borderRadiusTop",
          "value": 15
        },
        "borderWidthBottom": {
          "key": "borderWidthBottom",
          "value": 1
        },
        "borderWidthLeft": {
          "key": "borderWidthLeft",
          "value": 1
        },
        "borderWidthRight": {
          "key": "borderWidthRight",
          "value": 1
        },
        "borderWidthTop": {
          "key": "borderWidthTop",
          "value": 1
        },
        "min": {
          "key": "min",
          "value": null
        },
        "max": {
          "key": "max",
          "value": null
        },
        "mss": {
          "key": "mss",
          "value": 12
        },
        "value": {
          "key": "value",
          "value": 0.1053
        },
        "valueScale": {
          "key": "valueScale",
          "value": 1
        },
        "sliderExtent": {
          "key": "sliderExtent",
          "value": 0.1
        },
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        }
      },
      "lively.serializer-class-info": {
        "className": "Slider",
        "module": {
          "package": {
            "name": "Slider",
            "version": null
          },
          "pathInPackage": "index.js"
        }
      }
    },
    "Morph_CBF7F59C_73BE_4531_A372_7D7F8DDF5BC1": {
      "rev": 735591,
      "props": {
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.9,41.0)"
        },
        "fill": {
          "key": "fill",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"
        },
        "name": {
          "key": "name",
          "value": "knob"
        },
        "nativeCursor": {
          "key": "nativeCursor",
          "value": "pointer"
        },
        "origin": {
          "key": "origin",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.0,0.0)"
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "SliderKnob",
            "Morph",
            "morph"
          ]
        },
        "submorphs": {
          "key": "submorphs",
          "value": []
        },
        "borderColorBottom": {
          "key": "borderColorBottom",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorLeft": {
          "key": "borderColorLeft",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorRight": {
          "key": "borderColorRight",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderColorTop": {
          "key": "borderColorTop",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(189,195,199)"
        },
        "borderRadiusBottom": {
          "key": "borderRadiusBottom",
          "value": 18
        },
        "borderRadiusLeft": {
          "key": "borderRadiusLeft",
          "value": 18
        },
        "borderRadiusRight": {
          "key": "borderRadiusRight",
          "value": 18
        },
        "borderRadiusTop": {
          "key": "borderRadiusTop",
          "value": 18
        },
        "borderWidthBottom": {
          "key": "borderWidthBottom",
          "value": 1
        },
        "borderWidthLeft": {
          "key": "borderWidthLeft",
          "value": 1
        },
        "borderWidthRight": {
          "key": "borderWidthRight",
          "value": 1
        },
        "borderWidthTop": {
          "key": "borderWidthTop",
          "value": 1
        },
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        }
      },
      "lively.serializer-class-info": {
        "className": "SliderKnob",
        "module": {
          "package": {
            "name": "SliderKnob",
            "version": null
          },
          "pathInPackage": "index.js"
        }
      }
    }
  },
  "requiredVersion": "~0.1",
  "packages": {
    "local://lively-object-modules/": {
      "Slider": {
        "package.json": "{\n  \"name\": \"Slider\",\n  \"version\": \"0.1.0\",\n  \"lively\": {\n    \"isObjectPackage\": true\n  }\n}",
        "index.js": "import { Morph } from \"lively.morphic\";\nimport { pt } from \"lively.graphics/index.js\";\nimport { num } from \"lively.lang/index.js\";\n\nexport default class Slider extends Morph {\n\n  static get properties() {\n    return {\n\n      min: {defaultValue: null},\n      max: {defaultValue: null},\n      mss: {defaultValue: 12/*\"minimum slider size\"*/},\n\n      isVertical: {\n        readOnly: true, derived: true, after: [\"extent\"],\n        get() { return this.height > this.width; }\n      },\n\n      knob: {\n        readOnly: true, derived: true, after: [\"submorphs\"],\n        get() { return this.getSubmorphNamed(\"knob\"); }\n      },\n\n      extent: {\n        set(val) {\n          this.setProperty(\"extent\", val);\n          this.adjustSliderParts();\n        }\n      },\n\n      value: {\n        set(val) {\n          this.setProperty(\"value\", val);\n          this.adjustSliderParts();\n        }\n      },\n\n      valueScale: {\n        defaultValue: 1.0,\n        after: [\"submorphs\"],\n        set(val) {\n          this.setProperty(\"valueScale\", val);\n          this.adjustSliderParts();\n        }\n      },\n\n      scaledValue: {\n        after: [\"value\", \"valueScale\"], derived: true,\n        set(value) {\n          let {valueScale, value: v, min, max} = this;\n          this.value = typeof min === \"number\" && typeof max === \"number\" ?\n            (max-min) * value + min : value * valueScale;\n        },\n        get() {\n          let {valueScale, value: v, min, max} = this;\n          v = v || 0;\n          return typeof min === \"number\" && typeof max === \"number\" ?\n            (v-min)/(max-min) :\n            v / valueScale;\n        }\n      },\n\n      sliderExtent: {\n        defaultValue: 0.1,\n        set(val) {\n          this.setProperty(\"sliderExtent\", val)\n          this.adjustSliderParts();\n        }\n      }\n\n    }\n\n  }\n\n  reset() {\n\n    let props = this.constructor.properties;\n    let keys = Object.keys(props);\n    keys.forEach(key =>\n      typeof this[key] === \"undefined\" && (this[key] = props[key].defaultValue))\n\n    this.knob.nativeCursor = \"pointer\";\n    this.knob.show()\n    this.value = .5\n    this.scaledValue\n  }\n\n  onValueChange(newValue, oldValue) {}\n\n  clipValue(val) {\n    return Math.min(1.0,Math.max(0,0, num.roundTo(val, 0.0001)));\n  }\n\n  adjustSliderParts() {\n    // this.adjustSliderParts()\n    let {knob, mss, isVertical, scaledValue, sliderExtent} = this;\n    if (!knob) return;\n\n    // This method adjusts the slider for changes in value as well as geometry\n    var val = scaledValue,\n        bnds = this.innerBounds(),\n        ext = sliderExtent;\n \n    if (isVertical) { // more vertical...\n      var elevPix = Math.max(ext*bnds.height, mss), // thickness of elevator in pixels\n          topLeft = pt(0, Math.round((bnds.height - elevPix)*val)), // ael: round to prevent artifacts\n          sliderExt = pt(bnds.width, elevPix);\n    } else { // more horizontal...\n      var elevPix = Math.max(ext*bnds.width, mss), // thickness of elevator in pixels\n          topLeft = pt(Math.round((bnds.width - elevPix)*val), 0), // ael: as above\n          sliderExt = pt(elevPix, bnds.height);\n    }\n\n    knob.setBounds(bnds.topLeft().addPt(topLeft).extent(sliderExt));\n  }\n}\n\n"
      },
      "SliderKnob": {
        "package.json": "{\n  \"name\": \"SliderKnob\",\n  \"version\": \"0.1.0\",\n  \"lively\": {\n    \"isObjectPackage\": true\n  }\n}",
        "index.js": "import { Morph } from \"lively.morphic\";\n\nexport default class SliderKnob extends Morph {\n\n  get isSliderKnob() { return true; }\n\n  onDragStart(evt) {\n    this.hitPoint = evt.positionIn(this.owner);\n  }\n\n  onDrag(evt) {\n      // the hitpoint is the offset that make the slider move smooth\n      let {hitPoint, owner: slider} = this;\n      if (!hitPoint) return; // we were not clicked on...\n\n      // Compute the value from a new mouse point, and emit it\n      var delta = slider.localize(evt.position).subPt(hitPoint),\n          p = this.bounds().topLeft().addPt(delta),\n          bnds = slider.innerBounds(),\n          ext = slider.sliderExtent;\n\n      if (slider.isVertical) {\n          // thickness of elevator in pixels\n          var elevPix = Math.max(ext*bnds.height,slider.mss),\n              newValue = p.y / (bnds.height-elevPix);\n      } else {\n          // thickness of elevator in pixels\n          var elevPix = Math.max(ext*bnds.width,slider.mss),\n              newValue =  p.x / (bnds.width-elevPix);\n      }\n\n      if (isNaN(newValue)) newValue = 0;\n      var prevVal = slider.scaledValue;\n      slider.scaledValue = slider.clipValue(newValue);\n\n      var newVal = slider.scaledValue;\n      if (+newVal != +prevVal) this.hitPoint = slider.localize(evt.position);\n  }\n\n}\n\n"
      }
    }
  },
  "preview": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFKklEQVR4Xu2a22sjZRjG35lJZibnprFNp6dsVxcKokW0LO4isnhRrDe6/4Gw4I2C9/4H3ggrXqqweCW4N4Ii7o3Luu2WrPawRduC2mPapt1MDpNmDslIUlqiTdNNY+CVfXLb+b488/t9zyT9vgiEFysCAqs0CEMQwmwRQAiEMCPALA4aAiHMCDCLg4ZACDMCzOKgIRDCjACzOGgIhDAjwCwOGgIhzAgwi4OGQAgzAszioCEQwowAszhoCIQwI8AsDhoCIcwIMIuDhkAIMwLM4qAhEMKMALM4aAiEMCPALA4aAiHMCDCLg4ZACDMCzOKgIRDCjACzOGgIhDAjwCwOGvJ/EHL7zp1YWA7GSaSBrlBgTCCxqz63adt9RG5IkiRvxSnrqqpsVSous1vjGadccXQ9b/zq9dCmbprb71y7ptcnPdGQqeTcDX/Id0P2eCKKrIzKXolc9/AyxymTUSxSVyREPlUhcolKpkV6Lkeq6iPZ6+FJgVGqKkrHdqhklpYcu6xn9PzHr7/68u2jiMdCvk0m/X0e9VZPT3QiGAgG/30PtuNQoWBQYrCfJFE8cYurGyny+WTyemVGt88/Sq5QKKTT+9/spzbem5ycNGtCvl5clJ916e6g1ndZkhqv8t30Hl0aSZDYQMbRba/8uUrd0SiJIj6aWlkK1cW+mdqeeeWF5y/XyE0/nP9kaFD7UFEar26jYFD1bz2x7qbvo+fypGfzFImEWsmDa4moVDJpd2f/pnBvav5NbSD2ZSQcjJ9GJpvNUSzaRaFgoCk8o3hAO3t7FO36x3cAAH9CAvuZTFqYSs7fTAz3fyDL3lOHZXXdjffGyafKTZ9Flm27axtbFIt145n1hBLqLyuZJgkzswv3RhJDVwXhdIa6rrt9vT3kU9XmQizbXduEkHO4qA0pl8skzP72+8ygpo03mwRCzou49XHCo+WV5b7e3ksQ0jq8ToyAkE5QbWNOCGkDXieGQkgnqLYxJ4S0Aa8TQyGkE1TbmBNC2oDXiaHCwtLynBaPv4ivvZ3A2/qc1f/Uf754YfgKhLQO778eUalUSJj65dGniSHt/WaHS5nM4daJ39d868R2HPev9U16BntZ53JlWiYJd+8n3x4e7v8qGAycupWrZ7MUi0YpfMZub/GgRNu7aYpGsdt7HiO5XN6obRbOzC58MTQ48K7XIzWcp2AYpCoK9XRHm75PJpujbD5PkXD4PHme6jGmaVFqO32rJuTHZDISUwM/DQ1oY412fV3XpeqJ4ehzF5tC+2N1ncLhIJ126vhUE29y89XPjrXN1MLuunf8eDv9u+npcEzxf69pvVf8qu/E8OrzzTRtSgxoDaeubrtXz1QURQX3FggYhlHYTe/ff7yzdX1iYuLwkVX/mno491E4EryueDyjXlnx1z/GLMuiglGsHeVWH2HVn52Ylk2P9WztiFeR8QOHM124RNUzdMu2iqZpLWVyhc9fG3/ps6NxDQ+cfnjwYMRTKmv+QGBMlKQLrlA+XvZuxRXK5Uq/Inv7ySW3ZFk7HlHcFjyifWYYXECSKB2UigeLJcdcsUwh9dYbV1frseColdkigRAIYUaAWRw0BEKYEWAWBw2BEGYEmMVBQyCEGQFmcdAQCGFGgFkcNARCmBFgFgcNgRBmBJjFQUMghBkBZnHQEAhhRoBZHDQEQpgRYBYHDYEQZgSYxUFDIIQZAWZx0BAIYUaAWRw0BEKYEWAWBw2BEGYEmMVBQyCEGQFmcdAQCGFGgFkcNARCmBFgFudvdWjwGiUjN4QAAAAASUVORK5CYII="
}