{
  "id": "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF",
  "snapshot": {
    "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF": {
      "rev": 59588,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "aWorldPreview"
        },
        "nativeCursor": {
          "key": "nativeCursor",
          "value": "pointer"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(125.0,25.0)"
        },
        "origin": {
          "key": "origin",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.0,100.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": [
            {
              "__ref__": true,
              "id": "image_4B20C528_F325_4A7E_9710_A6BB3C2C8AE0",
              "rev": 59594
            },
            {
              "__ref__": true,
              "id": "text_ED48E783_4BD0_4DE7_ABF0_C8090AF51F5A",
              "rev": 39817
            },
            {
              "__ref__": true,
              "id": "button_C5D31DF9_A26D_4D50_B313_D4A20A81EE8F",
              "rev": 39359
            },
            {
              "__ref__": true,
              "id": "button_ADE6CEA4_F633_4A48_967C_77D5DB47DAC7",
              "rev": 39360
            }
          ]
        },
        "scroll": {
          "key": "scroll",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"
        },
        "scrollbarOffset": {
          "key": "scrollbarOffset",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15.0,15.0)"
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "WorldPreview",
            "ObjectPreview",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              1,
              1,
              1,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "state": {
          "key": "state",
          "value": {
            "__ref__": true,
            "id": "E94EC465-90B8-4A42-B33D-ABC021220B57",
            "rev": 0
          }
        },
        "padding": {
          "key": "padding",
          "value": "__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(2,2,0,0)"
        },
        "worldList": {
          "key": "worldList",
          "value": null
        }
      },
      "lively.serializer-class-info": {
        "className": "WorldPreview",
        "module": {
          "package": {
            "name": "ObjectPreview",
            "version": "0.1.0"
          },
          "pathInPackage": "index.js",
          "lastChange": 1501495964536,
          "lastSuperclassChange": 1501495969244
        }
      }
    },
    "image_4B20C528_F325_4A7E_9710_A6BB3C2C8AE0": {
      "rev": 59594,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "preview"
        },
        "reactsToPointer": {
          "key": "reactsToPointer",
          "value": false
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(44.0,2.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(96.0,96.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": [
            {
              "__ref__": true,
              "id": "label_4D03D594_5190_48FE_86A4_F48C1F33CB15",
              "rev": 59587
            }
          ]
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Image",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              1,
              1,
              1,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "imageUrl": {
          "key": "imageUrl",
          "value": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
        },
        "naturalExtent": {
          "key": "naturalExtent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1.0,1.0)"
        }
      },
      "lively.serializer-class-info": {
        "className": "Image",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "morph.js",
          "lastChange": 1501495696507,
          "lastSuperclassChange": 0
        }
      }
    },
    "label_4D03D594_5190_48FE_86A4_F48C1F33CB15": {
      "rev": 59587,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "label"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-42.0,80.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": []
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Label",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              1,
              1,
              1,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "textAndAttributes": {
          "key": "textAndAttributes",
          "value": [
            "",
            null
          ]
        }
      },
      "lively.serializer-class-info": {
        "className": "Label",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/label.js",
          "lastChange": 1501495696412,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "text_ED48E783_4BD0_4DE7_ABF0_C8090AF51F5A": {
      "rev": 39817,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "description"
        },
        "nativeCursor": {
          "key": "nativeCursor",
          "value": "default"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(184.1,2.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(213.9,96.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": []
        },
        "clipMode": {
          "key": "clipMode",
          "value": "auto"
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Text",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 2
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              0.8,
              0.8,
              0.8,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "embeddedMorphMap": {
          "key": "embeddedMorphMap",
          "value": {
            "__ref__": true,
            "id": "4B652E39-5432-4559-A4BA-D3131893ED68",
            "rev": 0
          }
        },
        "fixedWidth": {
          "key": "fixedWidth",
          "value": true
        },
        "fixedHeight": {
          "key": "fixedHeight",
          "value": true
        },
        "readOnly": {
          "key": "readOnly",
          "value": true
        },
        "padding": {
          "key": "padding",
          "value": "__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(8,8,0,0)"
        },
        "anchors": {
          "key": "anchors",
          "value": [
            {
              "__ref__": true,
              "id": "selection-start-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F",
              "rev": 0
            },
            {
              "__ref__": true,
              "id": "selection-end-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F",
              "rev": 0
            }
          ]
        },
        "savedMarks": {
          "key": "savedMarks",
          "value": []
        },
        "plugins": {
          "key": "plugins",
          "value": []
        },
        "selections": {
          "key": "selections",
          "verbatim": true,
          "value": [
            {
              "start": {
                "row": 0,
                "column": 0
              },
              "end": {
                "row": 0,
                "column": 0
              }
            }
          ]
        },
        "textAndAttributes": {
          "key": "textAndAttributes",
          "verbatim": true,
          "value": [
            "",
            null
          ]
        }
      },
      "lively.serializer-class-info": {
        "className": "Text",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/morph.js",
          "lastChange": 1501495696935,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "4B652E39-5432-4559-A4BA-D3131893ED68": {
      "rev": 0,
      "props": {},
      "entries": [],
      "lively.serializer-class-info": {
        "className": "Map"
      }
    },
    "selection-start-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F": {
      "rev": 0,
      "props": {
        "id": {
          "key": "id",
          "value": "selection-start-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F"
        },
        "position": {
          "key": "position",
          "value": {
            "__ref__": true,
            "id": "978D53E6-3AB9-42FC-838C-C1FC9E85526E",
            "rev": 0
          }
        },
        "insertBehavior": {
          "key": "insertBehavior",
          "value": "move"
        }
      },
      "lively.serializer-class-info": {
        "className": "Anchor",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/anchors.js",
          "lastChange": 1501495696839,
          "lastSuperclassChange": 0
        }
      }
    },
    "978D53E6-3AB9-42FC-838C-C1FC9E85526E": {
      "rev": 0,
      "props": {
        "row": {
          "key": "row",
          "value": 0
        },
        "column": {
          "key": "column",
          "value": 0
        }
      }
    },
    "selection-end-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F": {
      "rev": 0,
      "props": {
        "id": {
          "key": "id",
          "value": "selection-end-9F6EBD5C-F694-4FA0-82AE-3BB786D0980F"
        },
        "position": {
          "key": "position",
          "value": {
            "__ref__": true,
            "id": "9B0BBF7E-52AD-411B-8CB6-21C85439EA7F",
            "rev": 0
          }
        },
        "insertBehavior": {
          "key": "insertBehavior",
          "value": "move"
        }
      },
      "lively.serializer-class-info": {
        "className": "Anchor",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/anchors.js",
          "lastChange": 1501495696839,
          "lastSuperclassChange": 0
        }
      }
    },
    "9B0BBF7E-52AD-411B-8CB6-21C85439EA7F": {
      "rev": 0,
      "props": {
        "row": {
          "key": "row",
          "value": 0
        },
        "column": {
          "key": "column",
          "value": 0
        }
      }
    },
    "button_C5D31DF9_A26D_4D50_B313_D4A20A81EE8F": {
      "rev": 39359,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections",
          "value": [
            {
              "__ref__": true,
              "id": "9E45645B-F89B-4CD0-8A20-0BE4A4BCE78B",
              "rev": 0
            }
          ]
        },
        "name": {
          "key": "name",
          "value": "version button"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(333.3,76.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(62.7,20.0)"
        },
        "visible": {
          "key": "visible",
          "value": false
        },
        "submorphs": {
          "key": "submorphs",
          "value": [
            {
              "__ref__": true,
              "id": "label_C17F45BC_D7E1_44D5_9E62_41A4B4C44FC5",
              "rev": 2815
            }
          ]
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Button",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 1,
            "right": 1,
            "bottom": 1,
            "left": 1
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 5,
            "right": 5,
            "bottom": 5,
            "left": 5
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "right": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "bottom": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "left": [
              0.8,
              0.8,
              0.8,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "labelMorph": {
          "key": "labelMorph",
          "value": {
            "__ref__": true,
            "id": "label_C17F45BC_D7E1_44D5_9E62_41A4B4C44FC5",
            "rev": 2815
          }
        },
        "label": {
          "key": "label",
          "value": "versions..."
        }
      },
      "lively.serializer-class-info": {
        "className": "Button",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "components/buttons.js",
          "lastChange": 1501495696843,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "9E45645B-F89B-4CD0-8A20-0BE4A4BCE78B": {
      "rev": 0,
      "props": {
        "doNotSerialize": {
          "key": "doNotSerialize",
          "value": [
            "isActive",
            "converter",
            "updater"
          ]
        },
        "sourceObj": {
          "key": "sourceObj",
          "value": {
            "__ref__": true,
            "id": "button_C5D31DF9_A26D_4D50_B313_D4A20A81EE8F",
            "rev": 39359
          }
        },
        "sourceAttrName": {
          "key": "sourceAttrName",
          "value": "fire"
        },
        "targetObj": {
          "key": "targetObj",
          "value": {
            "__ref__": true,
            "id": "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF",
            "rev": 59588
          }
        },
        "targetMethodName": {
          "key": "targetMethodName",
          "value": "interactivelyShowVersions"
        },
        "varMapping": {
          "key": "varMapping",
          "value": {
            "__ref__": true,
            "id": "570A9882-6B40-4F85-9243-25D392E0D72A",
            "rev": 0
          }
        },
        "garbageCollect": {
          "key": "garbageCollect",
          "value": true
        },
        "signalOnAssignment": {
          "key": "signalOnAssignment",
          "value": true
        }
      },
      "lively.serializer-class-info": {
        "className": "AttributeConnection",
        "module": {
          "package": {
            "name": "lively.bindings",
            "version": "0.1.2"
          },
          "pathInPackage": "index.js",
          "lastChange": 1501495696362,
          "lastSuperclassChange": 0
        }
      }
    },
    "570A9882-6B40-4F85-9243-25D392E0D72A": {
      "rev": 0,
      "props": {
        "source": {
          "key": "source",
          "value": {
            "__ref__": true,
            "id": "button_C5D31DF9_A26D_4D50_B313_D4A20A81EE8F",
            "rev": 39359
          }
        },
        "target": {
          "key": "target",
          "value": {
            "__ref__": true,
            "id": "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF",
            "rev": 59588
          }
        }
      }
    },
    "label_C17F45BC_D7E1_44D5_9E62_41A4B4C44FC5": {
      "rev": 2815,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "label"
        },
        "reactsToPointer": {
          "key": "reactsToPointer",
          "value": false
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(4.0,3.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54.7,14.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": []
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Label",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              1,
              1,
              1,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "textAndAttributes": {
          "key": "textAndAttributes",
          "value": [
            "versions...",
            null
          ]
        }
      },
      "lively.serializer-class-info": {
        "className": "Label",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/label.js",
          "lastChange": 1501495696412,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "button_ADE6CEA4_F633_4A48_967C_77D5DB47DAC7": {
      "rev": 39360,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections",
          "value": [
            {
              "__ref__": true,
              "id": "328D8847-470D-4F69-9183-6C3A6B07758B",
              "rev": 0
            }
          ]
        },
        "name": {
          "key": "name",
          "value": "remove button"
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(388.0,-12.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.0,26.0)"
        },
        "fill": {
          "key": "fill",
          "value": null
        },
        "visible": {
          "key": "visible",
          "value": false
        },
        "submorphs": {
          "key": "submorphs",
          "value": [
            {
              "__ref__": true,
              "id": "label_A2038786_EF6D_4918_9B59_364D0DE759E2",
              "rev": 19545
            }
          ]
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Button",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 5,
            "right": 5,
            "bottom": 5,
            "left": 5
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "right": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "bottom": [
              0.8,
              0.8,
              0.8,
              1
            ],
            "left": [
              0.8,
              0.8,
              0.8,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "fontSize": {
          "key": "fontSize",
          "value": 16
        },
        "fontColor": {
          "key": "fontColor",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(204,0,0)"
        },
        "labelMorph": {
          "key": "labelMorph",
          "value": {
            "__ref__": true,
            "id": "label_A2038786_EF6D_4918_9B59_364D0DE759E2",
            "rev": 19545
          }
        },
        "label": {
          "key": "label",
          "value": [
            "",
            {
              "__ref__": true,
              "id": "F0716003-9CB6-401C-8E66-F152D6535E93",
              "rev": 0
            }
          ]
        }
      },
      "lively.serializer-class-info": {
        "className": "Button",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "components/buttons.js",
          "lastChange": 1501495696843,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "328D8847-470D-4F69-9183-6C3A6B07758B": {
      "rev": 0,
      "props": {
        "doNotSerialize": {
          "key": "doNotSerialize",
          "value": [
            "isActive",
            "converter",
            "updater"
          ]
        },
        "sourceObj": {
          "key": "sourceObj",
          "value": {
            "__ref__": true,
            "id": "button_ADE6CEA4_F633_4A48_967C_77D5DB47DAC7",
            "rev": 39360
          }
        },
        "sourceAttrName": {
          "key": "sourceAttrName",
          "value": "fire"
        },
        "targetObj": {
          "key": "targetObj",
          "value": {
            "__ref__": true,
            "id": "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF",
            "rev": 59588
          }
        },
        "targetMethodName": {
          "key": "targetMethodName",
          "value": "interactivelyRemoveWorld"
        },
        "varMapping": {
          "key": "varMapping",
          "value": {
            "__ref__": true,
            "id": "C97D0963-F20F-49F1-88C8-B8EF7C0BDBDF",
            "rev": 0
          }
        },
        "garbageCollect": {
          "key": "garbageCollect",
          "value": true
        },
        "signalOnAssignment": {
          "key": "signalOnAssignment",
          "value": true
        }
      },
      "lively.serializer-class-info": {
        "className": "AttributeConnection",
        "module": {
          "package": {
            "name": "lively.bindings",
            "version": "0.1.2"
          },
          "pathInPackage": "index.js",
          "lastChange": 1501495696362,
          "lastSuperclassChange": 0
        }
      }
    },
    "C97D0963-F20F-49F1-88C8-B8EF7C0BDBDF": {
      "rev": 0,
      "props": {
        "source": {
          "key": "source",
          "value": {
            "__ref__": true,
            "id": "button_ADE6CEA4_F633_4A48_967C_77D5DB47DAC7",
            "rev": 39360
          }
        },
        "target": {
          "key": "target",
          "value": {
            "__ref__": true,
            "id": "worldpreview_E3021BE7_6654_4FAF_987F_83D94FBE61AF",
            "rev": 59588
          }
        }
      }
    },
    "label_A2038786_EF6D_4918_9B59_364D0DE759E2": {
      "rev": 19545,
      "props": {
        "_tickingScripts": {
          "key": "_tickingScripts",
          "value": []
        },
        "attributeConnections": {
          "key": "attributeConnections"
        },
        "name": {
          "key": "name",
          "value": "label"
        },
        "reactsToPointer": {
          "key": "reactsToPointer",
          "value": false
        },
        "position": {
          "key": "position",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(4.0,5.0)"
        },
        "extent": {
          "key": "extent",
          "value": "__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.0,16.0)"
        },
        "submorphs": {
          "key": "submorphs",
          "value": []
        },
        "styleClasses": {
          "key": "styleClasses",
          "value": [
            "Label",
            "Morph",
            "morph"
          ]
        },
        "borderWidth": {
          "key": "borderWidth",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderRadius": {
          "key": "borderRadius",
          "verbatim": true,
          "value": {
            "top": 0,
            "right": 0,
            "bottom": 0,
            "left": 0
          }
        },
        "borderStyle": {
          "key": "borderStyle",
          "verbatim": true,
          "value": {
            "top": "solid",
            "right": "solid",
            "bottom": "solid",
            "left": "solid"
          }
        },
        "borderColor": {
          "key": "borderColor",
          "verbatim": true,
          "value": {
            "top": [
              1,
              1,
              1,
              1
            ],
            "right": [
              1,
              1,
              1,
              1
            ],
            "bottom": [
              1,
              1,
              1,
              1
            ],
            "left": [
              1,
              1,
              1,
              1
            ]
          }
        },
        "styleSheets": {
          "key": "styleSheets",
          "value": []
        },
        "textAndAttributes": {
          "key": "textAndAttributes",
          "value": [
            "",
            {
              "__ref__": true,
              "id": "F0716003-9CB6-401C-8E66-F152D6535E93",
              "rev": 0
            }
          ]
        },
        "fontSize": {
          "key": "fontSize",
          "value": 16
        },
        "fontColor": {
          "key": "fontColor",
          "value": "__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(204,0,0)"
        }
      },
      "lively.serializer-class-info": {
        "className": "Label",
        "module": {
          "package": {
            "name": "lively.morphic",
            "version": "0.1.0"
          },
          "pathInPackage": "text/label.js",
          "lastChange": 1501495696412,
          "lastSuperclassChange": 1501495696461
        }
      }
    },
    "F0716003-9CB6-401C-8E66-F152D6535E93": {
      "rev": 0,
      "props": {
        "fontFamily": {
          "key": "fontFamily",
          "value": ""
        },
        "textStyleClasses": {
          "key": "textStyleClasses",
          "value": [
            "fa"
          ]
        }
      }
    },
    "E94EC465-90B8-4A42-B33D-ABC021220B57": {
      "rev": 0,
      "props": {
        "__dont_serialize__": {
          "key": "__dont_serialize__",
          "value": [
            "snapshot",
            "object",
            "versionGraph"
          ]
        },
        "ref": {
          "key": "ref",
          "value": {
            "__ref__": true,
            "id": "D002D0B9-E793-41A0-A88E-F9C8AB944F1A",
            "rev": 0
          }
        },
        "log": {
          "key": "log",
          "value": null
        },
        "commit": {
          "key": "commit",
          "value": null
        }
      }
    },
    "D002D0B9-E793-41A0-A88E-F9C8AB944F1A": {
      "rev": 0,
      "props": {
        "type": {
          "key": "type",
          "value": null
        },
        "name": {
          "key": "name",
          "value": null
        },
        "_id": {
          "key": "_id",
          "value": null
        },
        "ref": {
          "key": "ref",
          "value": null
        },
        "realm": {
          "key": "realm",
          "value": null
        }
      }
    }
  },
  "requiredVersion": "~0.1",
  "packages": {
    "local://lively-object-modules/": {
      "ObjectPreview": {
        "package.json": "{\n  \"name\": \"ObjectPreview\",\n  \"version\": \"0.1.0\",\n  \"lively\": {\n    \"isObjectPackage\": true\n  }\n}",
        "index.js": "import { Morph, Icon, World, inspect, morph, ProportionalLayout } from \"lively.morphic\";\nimport { Rectangle, rect, Color, pt } from \"lively.graphics/index.js\";\nimport { MorphicDB } from \"lively.morphic/morphicdb/index.js\";\nimport { date } from \"lively.lang/index.js\";\nimport { disconnectAll, disconnect, connect } from \"lively.bindings/index.js\";\nimport { truncate } from \"lively.lang/string.js\";\nimport { VerticalResizer, HorizontalResizer } from \"lively.morphic/components/resizers.js\";\nimport LoadingIndicator from \"lively.morphic/components/loading-indicator.js\";\nimport { delay } from \"lively.lang/promise.js\";\n\nexport class ObjectPreview extends Morph {\n\n  static get properties() {\n\n    return {\n\n      extent: {defaultValue: pt(200,200)},\n      fill: {defaultValue: Color.white},\n\n      state: {\n        initialize() {\n          this.state = {\n            __dont_serialize__: [\"snapshot\", \"object\", \"versionGraph\"],\n            ref: {type: null, name: null, _id: null, ref: null, realm: null},\n            versionGraph: null,\n            log: null,\n            commit: null,\n            snapshot: null,\n            object: null,\n          }\n        },\n      },\n\n      previewAlign: {defaultValue: \"center\"},\n\n      // layout: {\n      //   initialize() {\n      //     this.layout = new ProportionalLayout({submorphSettings: [[\"label\", {y: \"move\"}]]});\n      //   }\n      // },\n\n      padding: {\n        type: \"Rectangle\",\n        defaultValue: Rectangle.inset(2)\n      }\n    }\n\n  }\n\n  get db() { return MorphicDB.default; }\n\n\n  beforePublish() {\n    // disconnectAll(this);\n    this.reset();\n  }\n\n  async reset() {\n    this.propertiesAndPropertySettings().properties.state.initialize.call(this);\n    let preview     = this.getSubmorphNamed(\"preview\")\n    if (preview) preview.clear()\n    let label       = this.getSubmorphNamed(\"label\")\n    if (label) label.value = \"\";\n    \n    // let commits = await this.db.latestCommits(\"world\")\n    // let ci = commits.find(ea => ea.name === \"faces\")\n    // this.state.ref = {name: ci.name, type: \"world\"};\n    // this.updatePreview();\n  }\n\n  initWithCommit(commit, worldList) {\n    // let commit = this.state.commit\n    this.reset();\n    this.state = {...this.state, commit, ref: commit};\n    this.worldList = worldList;\n    this.updatePreview();\n  }\n\n  onChange(change) {\n    if (change.prop === \"extent\") this.relayout();\n    return super.onChange(change);\n  }\n\n  relayout() {\n    let preview = this.getSubmorphNamed(\"preview\"),\n        label = this.getSubmorphNamed(\"label\"),\n        {padding, width, height} = this;\n    if (!preview || !label) return;\n    if (width <= height) preview.setWidthKeepingRatio(width-(padding.left()+padding.right()));\n    else preview.setHeightKeepingRatio(height-(padding.bottom()+padding.top()));\n    preview[this.previewAlign] = this.innerBounds().insetByRect(padding)[this.previewAlign]();\n    label.bottomCenter = preview.innerBounds().bottomCenter().addXY(0, -padding.bottom());\n  }\n\n  showPreviewFor(type, name) {\n    this.state = {...this.state, ref: {name, type}};\n    return this.updatePreview();\n  }\n\n  async fetchCommit() {\n    if (this.state.commit) return this.state.commit;\n    let {name, type, ref, _id, realm} = this.state.ref,\n        commit = await this.db.fetchCommit(type, name, _id, ref);\n    this.state = {...this.state, commit};\n    return commit;\n  }\n\n  async fetchVersionGraph() {\n    if (this.state.versionGraph) return this.state.versionGraph;\n    let {name, type, ref, _id, realm} = this.state.ref;\n    if (!type || !name) {\n      ({name, type} = await this.fetchCommit());\n    }\n    let versionGraph = await this.db.history(type, name);\n    this.state = {...this.state, versionGraph};\n    return versionGraph;\n  }\n\n  async fetchLog(commitId, limit = 100) {  \n    let {_id, realm} = this.state.ref;\n    if (!_id) ({_id} = await this.fetchCommit());\n    return this.db.log(_id, limit, true);\n  }\n\n  async delete(dryRun) {\n  // await this.fetchLog(_id)\n    let {type, name} = this.state.ref;\n    return this.db.delete(type, name, dryRun);\n  }\n\n  async updatePreview() {\n    let preview = this.getSubmorphNamed(\"preview\")\n                || this.addMorph({name: \"preview\", type: \"image\", autoResize: false}),\n        label = this.getSubmorphNamed(\"label\")\n                || preview.addMorph({name: \"label\", type: \"label\"}),\n        ci = await this.fetchCommit();\n\n    Object.assign(preview, {\n      reactsToPointer: false,\n      imageUrl: ci.preview\n    });\n    label.value = [ci.name, {fontWeight: \"bold\"}];\n    label.fit();\n    await preview.whenLoaded();\n\n    this.relayout();\n  }\n\n}\n\n// new WorldPreview().openInHand()\n\nexport class WorldPreview extends ObjectPreview {\n\n  static get properties() {\n    return {\n      worldList: {},\n      previewAlign: {defaultValue: \"leftCenter\"},\n    }\n  }\n\n  get isWorldPreview() { return true; }\n\n  async reset() {\n    super.reset();\n    let description = this.getSubmorphNamed(\"description\")\n    if (description) description.textString = \"\";\n    this.worldList = null;\n    // new WorldPreview().openInWorld();\n    // this.submorphs = [];\n    // await this.showPreviewFor(\"world\", \"faces\");\n    // this.getSubmorphNamed(\"description\")\n  }\n\n  relayout() {\n    super.relayout();\n    let preview = this.getSubmorphNamed(\"preview\"),\n        description = this.getSubmorphNamed(\"description\"),\n        versionButton = this.getSubmorphNamed(\"version button\"),\n        removeButton = this.getSubmorphNamed(\"remove button\"),\n        bounds = this.innerBounds(),\n        {padding: p} = this;\n\n    if (!removeButton\n     || !versionButton\n     || !description\n     || !preview) return;\n\n    description.setBounds(rect(\n      preview.topRight.addXY(p.left(), 0),\n      bounds.bottomRight().subPt(p.bottomRight())));    \n\n    versionButton.bottomRight = bounds.bottomRight().addXY(-4, -4);\n\n    removeButton.topRight = bounds.topRight().addXY(8, -8);\n  }\n\n\n  setButtonVisibility(bool) {\n    let removeButton = this.getSubmorphNamed(\"remove button\"),\n        versionButton = this.getSubmorphNamed(\"version button\");\n    // if (bool && this.owner) {\n    //   this.owner.submorphs.forEach(ea =>\n    //     ea !== this && ea.isWorldPreview && ea.setButtonVisibility(false));\n    // }\n    [versionButton, removeButton]\n      .filter(Boolean)\n      .forEach(ea => ea.visible = bool);\n  }\n\n  onHoverIn(evt) { this.setButtonVisibility(true); }\n  onHoverOut(evt) { this.setButtonVisibility(false); }\n\n  onMouseUp(evt) {\n    // let preview = this.getSubmorphNamed(\"preview\");\n    if (evt.targetMorph === this)\n      this.interactivelyVisitWorld();\n  }\n\n  async updatePreview() {\n    await super.updatePreview();\n    let preview = this.getSubmorphNamed(\"preview\"),\n        description = this.getSubmorphNamed(\"description\")\n                    || this.addMorph({\n                      name: \"description\", type: \"text\",\n                      clipMode: \"auto\",\n                      padding: Rectangle.inset(8), readOnly: true,\n                      borderLeft: {color: Color.gray, width: 2}\n                    }),\n        versionButton = this.getSubmorphNamed(\"version button\")\n                    || this.addMorph({type: \"button\", width: 60, label: \"versions...\", name: \"version button\"}),\n        removeButton = this.getSubmorphNamed(\"remove button\")\n                     || this.addMorph({\n                       type: \"button\", extent: pt(22, 26),\n                       label: Icon.textAttribute(\"times-circle\"),\n                       fontColor: Color.red, fontSize: 20,\n                       borderWidth: 0,\n                       fill: null, name: \"remove button\"\n                     }),\n        {state: {commit: ci}} = this;\n\n    this.nativeCursor = \"pointer\";\n\n    connect(removeButton, 'fire', this, 'interactivelyRemoveWorld');\n    connect(versionButton, 'fire', this, 'interactivelyShowVersions');\n\n    description.textString = `Author: ${ci.author.name}\\n`\n      + `Modified at: ${date.format(new Date(ci.timestamp), \"yyyy-mm-dd HH:MM Z\")}`\n      + `\\n\\n`\n      + `${ci.description}`;\n\n    // removeButton.relayout();\n    this.relayout();\n  }\n\n  async interactivelyShowVersions() {\n    let {_id, name: n, type} = this.state.ref,\n        log = await this.fetchLog(_id),\n        items = log.map(ea => {\n          let {_id, author: {name}, message, timestamp} = ea;\n          return {\n            isListItem: true,\n            string: `${_id.slice(0,6)} `\n            + `${truncate(message.split(\"\\n\")[0], 40)} `\n            + `(${name} `\n            + `${date.format(new Date(timestamp), \"yyyy-mm-dd HH:MM Z\")})`,\n            value: ea\n          }\n        });\n\n    let logView = morph({\n      extent: pt(400, 300),\n      name: \"log view\",\n      layout: new ProportionalLayout(),\n      submorphs: [\n        {type: \"list\", name: \"commit list\", extent: pt(400, 150), items},\n        new HorizontalResizer({position: pt(0, 150), extent: pt(400, 5)}),\n        {type: \"text\", name: \"commit info text\", position: pt(0, 155), extent: pt(400, 145), clipMode: \"auto\", padding: Rectangle.inset(8, 4)}\n      ]\n    });\n    let [commitList, resizer, infoText] = logView.submorphs;\n    resizer.addScalingAbove(commitList);\n    resizer.addScalingBelow(infoText);\n    logView.openInWindow({title: `commit log for ${type}/${n}`})\n\n    connect(commitList, 'selection', infoText, 'textString', {\n      converter: commit => {\n        let {message, timestamp, author, _id} = commit;\n        return `${_id}\\n`\n        + `by ${author.name} <${author.email}>\\n`\n        + `${lively.lang.date.format(new Date(timestamp), \"yyyy-mm-dd HH:MM Z\")}\\n`\n        + `\\n\\n`\n        + `${message}`;\n      }\n    });\n\n    return logView;\n  }\n\n  async interactivelyRemoveWorld() {\n    let {name, type} = this.state.ref,\n        really = await $world.confirm(`Really remove world ${type}/${name}?`, {requester: this});\n    if (!really) return;\n    try {\n      // inspect(await this.delete(true));\n      await this.delete(false/*dryRn*/)\n      this.setStatusMessage(\"world \" + name + \" deleted\");\n      let informMorph = this.ownerChain().find(ea => typeof ea.onWorldRemoved === \"function\");\n      if (informMorph) informMorph.onWorldRemoved(this.state.ref);\n    } catch (err) { this.showError(err); }\n  }\n\n  async interactivelyVisitWorld() {\n    // await MorphicDB.default.fetchCommit(undefined, undefined, _id)\n    let {\n          worldList, showWorldListInLoadedWorld,\n          state: {ref: {name, type, ref, _id}}\n        } = this,\n        i = LoadingIndicator.open(`Loading ${name}...`),\n        _ = await delay(70),\n        oldWorld = $world;\n\n    try {\n      let newWorld = _id ? await World.loadFromCommit(_id) : await World.loadFromDB(name, ref);\n\n      if (worldList) {\n        worldList.onWorldLoaded(newWorld, oldWorld);\n      }\n\n      return newWorld;\n    } catch (err) {\n      console.error(err);\n      oldWorld.showError(\"Error loading world:\" + err);\n    } finally { i.remove(); }\n\n    \n  }\n\n}"
      }
    }
  },
  "preview": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAABkCAYAAACoy2Z3AAAFiUlEQVR4Xu3csW0cWwwF0JkypNLcgCM7dwXO7cgVuBu1tEodObhaERd85+fUIw8JXAyM/fflPwIECBAgEAjcQY0SAgQIECBwCRBHQIAAAQKRgACJ2BQRIECAgABxAwQIECAQCQiQiE0RAQIECAgQN0CAAAECkYAAidgUESBAgIAAcQMECBAgEAkIkIhNEQECBAgIEDdAgAABApGAAInYFBEgQICAAHEDBAgQIBAJCJCITREBAgQICBA3QIAAAQKRgACJ2BQRIECAwKcEyOPx+Hld11e8BAgQIFAh8Oe+7x/P7uSzAuTXdV3fnt2sv0eAAAECkcDv+76/R5X/KRIgzxb19+oEHo/H9fb2dr28vFyvr691/WmIwIDA3/u+vzz7HQHybFF/r05AgNStREPzAgJk3tyLGwQEyIYtmuGDAgLkg4DKDxUQIIcu3tj/CggQ90AgERAgiZqaZQICZNlCjTMkIECGoD3TLCBAmrejt14BAdK7G52NCQiQMWoPrRIQIKvWaZhMQIBkbqpOFxAgp1+A+a/rEiDOgEAiIEASNTXLBATIsoUaZ0hAgAxBe6ZZQIA0b0dvvQICpHc3OhsTECBj1B5aJSBAVq3TMJmAAMncVJ0uIEBOvwDz+0d0N0AgFBAgIZyyTQK+QDZt0yxzAgJkztpLtQICpHY1GqsWECDV69HcjIAAmXH2yjYBAbJto+YJBARIgKaEwCVAHAEBv0R3AwQiAQESsSnaJeALZNc+TTMlIECmpL1TLCBAipejtWIBAVK8HK1NCQiQKWnv7BIQILv2aZpIQIBEbIqOFxAgx58AAP87dzdAIBMQIJmbqlUCvkBWrdMwYwICZIzaQ70CAqR3NzprFhAgzdvR25CAABmC9swyAQGybKHGSQQESKKmhoAAcQME/BLdDRCIBARIxKZol4AvkF37NM2UgACZkvZOsYAAKV6O1ooFBEjxcrQ2JSBApqS9s0tAgOzap2kiAQESsSk6XkCAHH8CAPwS3Q0QyAQESOamapWAL5BV6zTMmIAAGaP2UK+AAOndjc6aBQRI83b0NiQgQIagPbNMQIAsW6hxEgEBkqipISBA3AABv0R3AwQiAQESsSnaJeALZNc+TTMlIECmpL1TLCBAipejtWIBAVK8HK1NCQiQKWnv7BIQILv2aZpIQIBEbIqOFxAgx58AAL9EdwMEMgEBkrmpWiXgC2TVOg0zJiBAxqg91CsgQHp3o7NmAQHSvB29DQkIkCFozywTECDLFmqcRECAJGpqCAgQN0DAL9HdAIFIQIBEbIp2CfgC2bVP00wJCJApae8UCwiQ4uVorVhAgBQvR2tTAgJkSto7uwQEyK59miYSECARm6LjBQTI8ScAwC/R3QCBTECAZG6qVgn4Alm1TsOMCQiQMWoP9QoIkN7d6KxZQIA0b0dvQwICZAjaM8sEBMiyhRonERAgiZoaAgLEDRDwS3Q3QCASECARm6JdAr5Adu3TNFMCAmRK2jvFAgKkeDlaKxYQIMXL0dqUgACZkvbOLgEBsmufpokEBEjEpuh4AQFy/AkA8Et0N0AgExAgmZuqVQK+QFat0zBjAgJkjNpDvQICpHc3OmsWECDN29HbkIAAGYL2zDIBAbJsocZJBARIoqaGgABxAwT8Et0NEIgEBEjEpmiXgC+QXfs0zZSAAJmS9k6xgAApXo7WigUESPFytDYlIECmpL2zS0CA7NqnaSIBARKxKTpeQIAcfwIA/BLdDRDIBARI5qZqlYAvkFXrNMyYgAAZo/ZQr4AA6d2NzpoFBEjzdvQ2JCBAhqA9s0xAgCxbqHESAQGSqKkhIEDcAAG/RHcDBCIBARKxKdol4Atk1z5NMyUgQKakvVMsIECKl6O1YgEBUrwcrU0JfEqAvAPmKZCShGQ9ygAAAABJRU5ErkJggg=="
}