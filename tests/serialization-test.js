/*global declare, it, describe, beforeEach, afterEach, before, after*/
import { createDOMEnvironment } from "../rendering/dom-helper.js";
import { MorphicEnv, Morph } from "../index.js";
import { morph } from "../index.js";
import { expect } from "mocha-es6";
import { pt, Color } from "lively.graphics";
import { serializeMorph, createMorphSnapshot, deserializeMorph, loadMorphFromSnapshot } from "../serialization.js";
import { arr } from "lively.lang";
import ObjectPackage from "lively.classes/object-classes.js";

var world;
function createDummyWorld() {
  return world = morph({
    type: "world", name: "world", extent: pt(300,300),
    submorphs: [{
        name: "submorph1", extent: pt(100,100), position: pt(10,10), fill: Color.red,
        submorphs: [{name: "submorph2", extent: pt(20,20), position: pt(5,10), fill: Color.green}]
      }]
  });
}

var env;
async function setup() {
  env = new MorphicEnv(await createDOMEnvironment());
  MorphicEnv.pushDefault(env);
  await env.setWorld(createDummyWorld());
}

function teardown() { MorphicEnv.popDefault().uninstall(); }

class OnLoadTestMorph extends Morph { onLoad() { this.onLoadCalled = true; }}

describe("morph serialization", function() {

  beforeEach(setup);
  afterEach(teardown);

  it("serialize single morph", () => {
    var m = morph({fill: Color.red, position: pt(10,20)}),
        copy = deserializeMorph(serializeMorph(m));
    expect(copy).instanceOf(m.constructor);
    expect(copy.id).equals(m.id);
    expect(copy).not.equal(m);
    expect(copy.position).equals(m.position);
    expect(copy.fill).equals(m.fill);
    expect(copy.extent).equals(m.extent);
  });

  it("uses onLoad function", () => {
    var m = new OnLoadTestMorph();
    expect(m.onLoadCalled).equals(undefined, "onLoad called on construction");
    expect(m.copy().onLoadCalled).equals(true, "onLoad not called on deserialization");
  });


  describe("object packages", () => {

    var objPackages = [];

    afterEach(async () => {
      await Promise.all(objPackages.map(ea => ea.remove()))
      objPackages.length = 0;
    });

    it("gets snapshotted", async () => {

      let p1 = ObjectPackage.withId("MorphA"),
          p2 = ObjectPackage.withId("MorphB");

      objPackages.push(p1, p2);

      let c1 = await p1.ensureObjectClass(Morph),
          c2 = await p2.ensureObjectClass(Morph)
      await p1.objectModule.systemModule.changeSource(`
        import { Morph } from "lively.morphic";
        export default class MorphA extends Morph {
          static get properties() { return {foo: {}}; }
        }`);

      let m1 = new c1();
      m1.foo = new c2();

      let snap = await createMorphSnapshot(m1)
      expect(snap.packages["local://lively-object-modules/"]).to.have.keys("MorphA", "MorphB");
    });



    describe("dealing with versions", () => {

      let snap1, snap2, snap3, p1, obj, c1;

      beforeEach(async () => {
        p1 = ObjectPackage.withId("MorphA");

        objPackages.push(p1);

        c1 = await p1.ensureObjectClass(Morph), obj = new c1();

        snap1 = await createMorphSnapshot(obj);

        await p1.objectModule.systemModule.changeSource(`
          import { Morph } from "lively.morphic";
          export default class MorphA extends Morph {m() { return 23; }}`);
        var config = await p1.resource("package.json").readJson();
        p1.systemPackage.updateConfig({...config, version: "0.2.0"});

        snap2 = await createMorphSnapshot(obj)

        await p1.objectModule.systemModule.changeSource(`
          import { Morph } from "lively.morphic";
          export default class MorphA extends Morph {m() { return 24; }}`);
        var config = await p1.resource("package.json").readJson();
        p1.systemPackage.updateConfig({...config, version: "0.3.0"});

        snap3 = await createMorphSnapshot(obj)

      });

  
      it("newer package versions get not overridden", async () => {
        expect(obj.m()).equals(24);
        let obj2 = await loadMorphFromSnapshot(snap2);
        expect(obj.m()).equals(24);
        expect(obj2.m()).equals(24);
        
        await p1.objectModule.systemModule.changeSource(`
          import { Morph } from "lively.morphic";
          export default class MorphA extends Morph {m() { return 25; }}`);
        let obj3 = await loadMorphFromSnapshot(snap2);

        expect(obj.m()).equals(25);
        expect(obj3.m()).equals(25);
      });

    });

  })
});

const migrationBlobs = {
  "2017-04-29 button wrapper": {"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","snapshot":{"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4":{"rev":39827,"props":{"name":{"key":"name","value":"CategoryVisualization"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(150.9,48.7)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(863.3,684.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(230,230,230)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931},{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792},{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794},{"__ref__":true,"id":"Label_DE40C922_74DC_4F1F_A8AE_5386B2F47CFE","rev":45976},{"__ref__":true,"id":"Morph_22274941_995C_449B_A099_D0F2F58B511B","rev":45929}]},"clipMode":{"key":"clipMode","value":"hidden"},"scroll":{"key":"scroll","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"styleClasses":{"key":"styleClasses","value":["Window","Morph","morph"]},"borderColorBottom":{"key":"borderColorBottom","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(102,102,102)"},"borderColorLeft":{"key":"borderColorLeft","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(102,102,102)"},"borderColorRight":{"key":"borderColorRight","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(102,102,102)"},"borderColorTop":{"key":"borderColorTop","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(102,102,102)"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":7},"borderRadiusLeft":{"key":"borderRadiusLeft","value":7},"borderRadiusRight":{"key":"borderRadiusRight","value":7},"borderRadiusTop":{"key":"borderRadiusTop","value":7},"borderWidthBottom":{"key":"borderWidthBottom","value":1},"borderWidthLeft":{"key":"borderWidthLeft","value":1},"borderWidthRight":{"key":"borderWidthRight","value":1},"borderWidthTop":{"key":"borderWidthTop","value":1},"styleSheets":{"key":"styleSheets","value":[{"__ref__":true,"id":"355DF4DC-F5CC-4B90-BC9D-43FD96873D8F","rev":0}]},"resizable":{"key":"resizable","value":true},"nonMaximizedBounds":{"key":"nonMaximizedBounds","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(1370.35,239.37179487179495,863.2999999999997,684)"},"minimized":{"key":"minimized","value":false},"maximized":{"key":"maximized","value":false},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"B1F250D1-7433-4566-90C4-7B4019EC029A","rev":0},{"__ref__":true,"id":"FFE5E6DC-5B03-4B6E-ADD1-5306C57A1624","rev":0}]}},"lively.serializer-class-info":{"className":"Window","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"components/window.js"}}},"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224":{"rev":45931,"props":{"name":{"key":"name","value":"close"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,25.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(863.3,659.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,96,82)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630","rev":39850}]},"scroll":{"key":"scroll","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"styleClasses":{"key":"styleClasses","value":["Ellipse","Morph","morph"]},"borderColorBottom":{"key":"borderColorBottom"},"borderColorLeft":{"key":"borderColorLeft"},"borderColorRight":{"key":"borderColorRight"},"borderColorTop":{"key":"borderColorTop"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":863.3},"borderRadiusLeft":{"key":"borderRadiusLeft","value":659},"borderRadiusRight":{"key":"borderRadiusRight","value":659},"borderRadiusTop":{"key":"borderRadiusTop","value":863.3},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"FC068303-B443-4266-AE52-C6EDD8A793F1","rev":0},{"__ref__":true,"id":"B4DE82F4-16DF-4740-8F75-A58919E582DE","rev":0},{"__ref__":true,"id":"B52BC158-4A20-4DBB-B89B-D895B536F8D7","rev":0}]}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630":{"rev":39850,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(2.3,1.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,12.1)"},"opacity":{"key":"opacity","value":0.5},"fill":{"key":"fill","value":null},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","morph"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÄç",null]},"padding":{"key":"padding","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(0,0,0,0)"},"fontColor":{"key":"fontColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"FC068303-B443-4266-AE52-C6EDD8A793F1":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"close"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"AEB6A164-D696-401E-B833-75D62195BEBD","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"AEB6A164-D696-401E-B833-75D62195BEBD":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"B4DE82F4-16DF-4740-8F75-A58919E582DE":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630","rev":39850}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"B492EA02-5336-4FC4-8AFB-A3775D5C598B","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"B492EA02-5336-4FC4-8AFB-A3775D5C598B":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630","rev":39850}}}},"B52BC158-4A20-4DBB-B89B-D895B536F8D7":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630","rev":39850}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"956FE9C0-5C1E-462B-810D-B9C22701A41A","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"956FE9C0-5C1E-462B-810D-B9C22701A41A":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_A8C56CFA_AF49_41B1_BF63_E3E29379B224","rev":45931}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_DB0EB23A_379B_4782_974C_6DEBA90A4630","rev":39850}}}},"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB":{"rev":39792,"props":{"name":{"key":"name","value":"minimize"},"tooltip":{"key":"tooltip","value":"collapse window"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(28.0,6.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.0,14.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,190,6)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_BB008751_2A97_456C_9754_F6F8237390CF","rev":39851}]},"scroll":{"key":"scroll","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"styleClasses":{"key":"styleClasses","value":["Ellipse","Morph","morph"]},"borderColorBottom":{"key":"borderColorBottom","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorLeft":{"key":"borderColorLeft","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorRight":{"key":"borderColorRight","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorTop":{"key":"borderColorTop","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":14},"borderRadiusLeft":{"key":"borderRadiusLeft","value":14},"borderRadiusRight":{"key":"borderRadiusRight","value":14},"borderRadiusTop":{"key":"borderRadiusTop","value":14},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"8D09E86C-B922-4B26-8881-744643083BC8","rev":0},{"__ref__":true,"id":"81779EA7-6995-4CDC-9357-3BEFEA23EFFF","rev":0},{"__ref__":true,"id":"9C63586D-B505-4D62-BF3A-5F3D45CCC9D6","rev":0}]}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_BB008751_2A97_456C_9754_F6F8237390CF":{"rev":39851,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(2.3,1.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,12.1)"},"opacity":{"key":"opacity","value":0.5},"fill":{"key":"fill","value":null},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","morph"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÅ®",null]},"padding":{"key":"padding","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(0,0,0,0)"},"fontColor":{"key":"fontColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"8D09E86C-B922-4B26-8881-744643083BC8":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"toggleMinimize"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"AAE95E98-4DD4-46B2-8692-5FCA75DF6CD3","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"AAE95E98-4DD4-46B2-8692-5FCA75DF6CD3":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"81779EA7-6995-4CDC-9357-3BEFEA23EFFF":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_BB008751_2A97_456C_9754_F6F8237390CF","rev":39851}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"CC1051F5-D1E0-4F54-8AEA-FCD409411DB1","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"},"converter":{"key":"converter"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"CC1051F5-D1E0-4F54-8AEA-FCD409411DB1":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_BB008751_2A97_456C_9754_F6F8237390CF","rev":39851}}}},"9C63586D-B505-4D62-BF3A-5F3D45CCC9D6":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_BB008751_2A97_456C_9754_F6F8237390CF","rev":39851}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"25D09072-EB46-4FC5-B172-3BAC39373A05","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"},"converter":{"key":"converter"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"25D09072-EB46-4FC5-B172-3BAC39373A05":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_DB42F288_2D12_4D41_974C_8215A86E09DB","rev":39792}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_BB008751_2A97_456C_9754_F6F8237390CF","rev":39851}}}},"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B":{"rev":39794,"props":{"name":{"key":"name","value":"maximize"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(48.0,6.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.0,14.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,204,0)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1","rev":39852}]},"scroll":{"key":"scroll","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"styleClasses":{"key":"styleClasses","value":["Ellipse","Morph","morph"]},"borderColorBottom":{"key":"borderColorBottom"},"borderColorLeft":{"key":"borderColorLeft"},"borderColorRight":{"key":"borderColorRight"},"borderColorTop":{"key":"borderColorTop"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":14},"borderRadiusLeft":{"key":"borderRadiusLeft","value":14},"borderRadiusRight":{"key":"borderRadiusRight","value":14},"borderRadiusTop":{"key":"borderRadiusTop","value":14},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"8D2323D7-111C-44DC-A331-6B6DC42A53FB","rev":0},{"__ref__":true,"id":"F25B70A3-A74E-4B7B-8FB5-8D46DF0DBE96","rev":0},{"__ref__":true,"id":"3F511FEC-4CFA-42C3-A44C-D445774A5DE2","rev":0}]}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1":{"rev":39852,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(2.3,1.0)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,12.1)"},"opacity":{"key":"opacity","value":0.5},"fill":{"key":"fill","value":null},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","morph"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÅß",null]},"padding":{"key":"padding","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(0,0,0,0)"},"fontColor":{"key":"fontColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"8D2323D7-111C-44DC-A331-6B6DC42A53FB":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"toggleMaximize"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"B1F29376-B5B7-4657-9C65-12B1B1DFE56A","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"B1F29376-B5B7-4657-9C65-12B1B1DFE56A":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"F25B70A3-A74E-4B7B-8FB5-8D46DF0DBE96":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1","rev":39852}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"5CF5DEDB-FD9A-4710-986B-471A8990715A","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"},"converter":{"key":"converter"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"5CF5DEDB-FD9A-4710-986B-471A8990715A":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1","rev":39852}}}},"3F511FEC-4CFA-42C3-A44C-D445774A5DE2":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1","rev":39852}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"D801598B-5762-4E7E-A0C2-EF3169623EA0","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"},"converter":{"key":"converter"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"D801598B-5762-4E7E-A0C2-EF3169623EA0":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Ellipse_636C4E16_91D3_4151_85C6_6981289E048B","rev":39794}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_80448CD7_ECFF_420D_BDC0_480C0DAB08B1","rev":39852}}}},"Label_DE40C922_74DC_4F1F_A8AE_5386B2F47CFE":{"rev":45976,"props":{"name":{"key":"name","value":"titleLabel"},"reactsToPointer":{"key":"reactsToPointer","value":false},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(367.4,4.5)"},"origin":{"key":"origin","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(119.2,15.9)"},"fill":{"key":"fill","value":null},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","morph"]},"textAndAttributes":{"key":"textAndAttributes","value":["Category Visualization",null]},"padding":{"key":"padding","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(0,2,0,-2)"},"fontColor":{"key":"fontColor","value":"black"},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"6AD4F269-172A-4828-ACA0-5158A3817596","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"6AD4F269-172A-4828-ACA0-5158A3817596":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Label_DE40C922_74DC_4F1F_A8AE_5386B2F47CFE","rev":45976}},"sourceAttrName":{"key":"sourceAttrName","value":"value"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"relayoutWindowControls"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"0DCAFA6D-FF35-467F-B95D-ADEAA34705E1","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"0DCAFA6D-FF35-467F-B95D-ADEAA34705E1":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Label_DE40C922_74DC_4F1F_A8AE_5386B2F47CFE","rev":45976}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"Morph_22274941_995C_449B_A099_D0F2F58B511B":{"rev":45929,"props":{"name":{"key":"name","value":"resizer"},"nativeCursor":{"key":"nativeCursor","value":"nwse-resize"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(843.3,664.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20.0,20.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Morph","morph"]},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"7B7BE9E0-9F9D-4D9E-8750-503CD0D21287","rev":0}]}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"7B7BE9E0-9F9D-4D9E-8750-503CD0D21287":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_22274941_995C_449B_A099_D0F2F58B511B","rev":45929}},"sourceAttrName":{"key":"sourceAttrName","value":"onDrag"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"resizeBy"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"23549A32-5502-4B71-A7FD-85FA644CA098","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"evt => evt.state.dragDelta"},"converter":{"key":"converter"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"23549A32-5502-4B71-A7FD-85FA644CA098":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_22274941_995C_449B_A099_D0F2F58B511B","rev":45929}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"355DF4DC-F5CC-4B90-BC9D-43FD96873D8F":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"rules":{"key":"rules","value":{"__ref__":true,"id":"7EA42685-2FFE-4E1E-A2CB-2905B73F59CA","rev":0}},"morph":{"key":"morph","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}},"lively.serializer-class-info":{"className":"StyleSheet","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"style-rules.js"}}},"7EA42685-2FFE-4E1E-A2CB-2905B73F59CA":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"buttonGroup":{"key":"buttonGroup","value":{"__ref__":true,"id":"14C98FFC-55BD-45AF-B963-2F669356C270","rev":0}},"closeButton":{"key":"closeButton","value":{"__ref__":true,"id":"84C9FBD7-8364-4B5D-A196-231EED80B09A","rev":0}},"closeLabel":{"key":"closeLabel","value":{"__ref__":true,"id":"BB5D18FD-8D51-4460-9B9A-07FE1F64BDED","rev":0}},"minimizeButton":{"key":"minimizeButton","value":{"__ref__":true,"id":"A5E9204A-FA44-4AF5-85A7-1E2D01D2D4BA","rev":0}},"minimizeLabel":{"key":"minimizeLabel","value":{"__ref__":true,"id":"BB5D18FD-8D51-4460-9B9A-07FE1F64BDED","rev":0}},"maximizeButton":{"key":"maximizeButton","value":{"__ref__":true,"id":"1E9EA8A7-4A12-492F-89B0-9B69E9FB5D28","rev":0}},"maximizeLabel":{"key":"maximizeLabel","value":{"__ref__":true,"id":"BB5D18FD-8D51-4460-9B9A-07FE1F64BDED","rev":0}},"windowTitleLabel":{"key":"windowTitleLabel","value":{"__ref__":true,"id":"4293A20E-6FB2-49FD-ADEC-F8C9CBEAC3E3","rev":0}},"windowBody":{"key":"windowBody","value":{"__ref__":true,"id":"1D37BE7D-9782-4063-BA10-C1046D096BAA","rev":0}}}},"14C98FFC-55BD-45AF-B963-2F669356C270":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"layout":{"key":"layout","value":{"__ref__":true,"id":"EB9EEA75-A95F-4152-83FB-05772F750410","rev":0}}}},"EB9EEA75-A95F-4152-83FB-05772F750410":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"border":{"key":"border","value":{"__ref__":true,"id":"36BAD841-89D2-4AAB-AC27-256EB8C869CD","rev":0}},"_spacing":{"key":"_spacing","value":6},"ignore":{"key":"ignore","value":[]},"lastBounds":{"key":"lastBounds","value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(0,0,63,25)"},"active":{"key":"active","value":false},"container":{"key":"container","value":{"__ref__":true,"id":"Morph_70A4C939_BB43_4F26_81A7_321A2F3FE01C","rev":39765}},"maxHeight":{"key":"maxHeight","value":0},"_autoResize":{"key":"_autoResize","value":true},"_direction":{"key":"_direction","value":"leftToRight"}},"lively.serializer-class-info":{"className":"HorizontalLayout","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"layout.js"}}},"36BAD841-89D2-4AAB-AC27-256EB8C869CD":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"top":{"key":"top","value":0},"left":{"key":"left","value":0},"right":{"key":"right","value":0},"bottom":{"key":"bottom","value":0}}},"Morph_70A4C939_BB43_4F26_81A7_321A2F3FE01C":{"rev":39765,"props":{"name":{"key":"name","value":"button wrapper"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0.0,0.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(63.0,25.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766},{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767},{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}]},"styleClasses":{"key":"styleClasses","value":["Morph","buttonGroup"]},"layout":{"key":"layout","value":{"__ref__":true,"id":"EB9EEA75-A95F-4152-83FB-05772F750410","rev":0}},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78":{"rev":39766,"props":{"name":{"key":"name","value":"close"},"tooltip":{"key":"tooltip","value":"close window"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(6.0,6.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,96,82)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_668A5C95_7A05_4943_A7D5_97122797C88C","rev":39708}]},"styleClasses":{"key":"styleClasses","value":["Morph","closeButton"]},"borderColorBottom":{"key":"borderColorBottom"},"borderColorLeft":{"key":"borderColorLeft"},"borderColorRight":{"key":"borderColorRight"},"borderColorTop":{"key":"borderColorTop"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":14},"borderRadiusLeft":{"key":"borderRadiusLeft","value":14},"borderRadiusRight":{"key":"borderRadiusRight","value":14},"borderRadiusTop":{"key":"borderRadiusTop","value":14},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"DA9E18DD-4BF9-4719-8801-67C497CA4C36","rev":0},{"__ref__":true,"id":"858AC534-E888-4F51-A31D-1BB27E818479","rev":0},{"__ref__":true,"id":"6D3C0766-21D5-4234-AB33-EFB8D86245CD","rev":0}]}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_668A5C95_7A05_4943_A7D5_97122797C88C":{"rev":39708,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1.8,0.6)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,11.9)"},"opacity":{"key":"opacity","value":0.5},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","closeLabel"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÄç",null]},"fontSize":{"key":"fontSize","value":11},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"DA9E18DD-4BF9-4719-8801-67C497CA4C36":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"close"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"0B2CF965-807E-40CC-9C63-7C6C4F1685B8","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"0B2CF965-807E-40CC-9C63-7C6C4F1685B8":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"858AC534-E888-4F51-A31D-1BB27E818479":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_668A5C95_7A05_4943_A7D5_97122797C88C","rev":39708}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"FE115501-C364-487B-AB00-64920834D604","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"FE115501-C364-487B-AB00-64920834D604":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_668A5C95_7A05_4943_A7D5_97122797C88C","rev":39708}}}},"6D3C0766-21D5-4234-AB33-EFB8D86245CD":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_668A5C95_7A05_4943_A7D5_97122797C88C","rev":39708}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"A4BFE33A-82ED-4107-A6D2-834E2E9D924C","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"A4BFE33A-82ED-4107-A6D2-834E2E9D924C":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_F76056B6_A4C5_4202_B326_6E15568F4E78","rev":39766}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_668A5C95_7A05_4943_A7D5_97122797C88C","rev":39708}}}},"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C":{"rev":39767,"props":{"name":{"key":"name","value":"minimize"},"tooltip":{"key":"tooltip","value":"collapse window"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.0,6.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,190,6)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_3004B9B3_3C3D_4575_9573_0B80237073FA","rev":39734}]},"styleClasses":{"key":"styleClasses","value":["Morph","minimizeButton"]},"borderColorBottom":{"key":"borderColorBottom","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorLeft":{"key":"borderColorLeft","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorRight":{"key":"borderColorRight","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderColorTop":{"key":"borderColorTop","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":14},"borderRadiusLeft":{"key":"borderRadiusLeft","value":14},"borderRadiusRight":{"key":"borderRadiusRight","value":14},"borderRadiusTop":{"key":"borderRadiusTop","value":14},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"8FE47109-1D8D-4F2F-AAFD-2E921ADAC83D","rev":0},{"__ref__":true,"id":"0978F144-8A55-49A9-8890-7E051DA45F58","rev":0},{"__ref__":true,"id":"D2FAE03F-2F9A-4E8F-B927-BE4A3AF908D4","rev":0}]}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_3004B9B3_3C3D_4575_9573_0B80237073FA":{"rev":39734,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1.8,0.6)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,11.9)"},"opacity":{"key":"opacity","value":0.5},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","minimizeLabel"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÅ®",null]},"fontSize":{"key":"fontSize","value":11},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"8FE47109-1D8D-4F2F-AAFD-2E921ADAC83D":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"toggleMinimize"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"0E58967D-ACAA-4521-BDDD-2348F01B8125","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"0E58967D-ACAA-4521-BDDD-2348F01B8125":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"0978F144-8A55-49A9-8890-7E051DA45F58":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_3004B9B3_3C3D_4575_9573_0B80237073FA","rev":39734}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"AE85C964-644F-493E-AD47-38F231417CB9","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"AE85C964-644F-493E-AD47-38F231417CB9":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_3004B9B3_3C3D_4575_9573_0B80237073FA","rev":39734}}}},"D2FAE03F-2F9A-4E8F-B927-BE4A3AF908D4":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_3004B9B3_3C3D_4575_9573_0B80237073FA","rev":39734}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"59199C7C-4D05-456C-B774-247CF5E8C3E6","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"59199C7C-4D05-456C-B774-247CF5E8C3E6":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_3F0C4F15_CBB7_42FE_974F_1080332E137C","rev":39767}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_3004B9B3_3C3D_4575_9573_0B80237073FA","rev":39734}}}},"Morph_6C417830_13E6_4B06_9873_4B59A5191E97":{"rev":39768,"props":{"name":{"key":"name","value":"maximize"},"tooltip":{"key":"tooltip","value":"maximize window"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(44.0,6.0)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,204,0)"},"submorphs":{"key":"submorphs","value":[{"__ref__":true,"id":"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17","rev":39760}]},"styleClasses":{"key":"styleClasses","value":["Morph","maximizeButton"]},"borderColorBottom":{"key":"borderColorBottom"},"borderColorLeft":{"key":"borderColorLeft"},"borderColorRight":{"key":"borderColorRight"},"borderColorTop":{"key":"borderColorTop"},"borderRadiusBottom":{"key":"borderRadiusBottom","value":14},"borderRadiusLeft":{"key":"borderRadiusLeft","value":14},"borderRadiusRight":{"key":"borderRadiusRight","value":14},"borderRadiusTop":{"key":"borderRadiusTop","value":14},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections","value":[{"__ref__":true,"id":"001C4E51-1C2E-4756-AFAA-3B1F73A99F63","rev":0},{"__ref__":true,"id":"49E1C599-FD2D-4491-AB67-E648D204CD80","rev":0},{"__ref__":true,"id":"A3EFD711-043F-4E9E-B23C-64DC25493AF8","rev":0}]}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"morph.js"}}},"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17":{"rev":39760,"props":{"name":{"key":"name","value":"aLabel"},"position":{"key":"position","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1.8,0.6)"},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(9.4,11.9)"},"opacity":{"key":"opacity","value":0.5},"visible":{"key":"visible","value":false},"submorphs":{"key":"submorphs","value":[]},"styleClasses":{"key":"styleClasses","value":["Label","Morph","maximizeLabel"]},"textAndAttributes":{"key":"textAndAttributes","value":["ÔÅß",null]},"fontSize":{"key":"fontSize","value":11},"_tickingScripts":{"key":"_tickingScripts","value":[]},"attributeConnections":{"key":"attributeConnections"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.0"},"pathInPackage":"text/label.js"}}},"001C4E51-1C2E-4756-AFAA-3B1F73A99F63":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"sourceAttrName":{"key":"sourceAttrName","value":"onMouseDown"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"toggleMaximize"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"0F376AE9-7470-4092-895D-7A515F962569","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"0F376AE9-7470-4092-895D-7A515F962569":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}},"49E1C599-FD2D-4491-AB67-E648D204CD80":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverIn"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17","rev":39760}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"C166E307-C2E3-467B-BBDF-BC2764C81888","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => true"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"C166E307-C2E3-467B-BBDF-BC2764C81888":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17","rev":39760}}}},"A3EFD711-043F-4E9E-B23C-64DC25493AF8":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"sourceAttrName":{"key":"sourceAttrName","value":"onHoverOut"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17","rev":39760}},"targetMethodName":{"key":"targetMethodName","value":"visible"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"F13EE2F8-DB29-4565-8986-70F008B8AC63","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true},"converterString":{"key":"converterString","value":"() => false"}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"F13EE2F8-DB29-4565-8986-70F008B8AC63":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Morph_6C417830_13E6_4B06_9873_4B59A5191E97","rev":39768}},"target":{"key":"target","value":{"__ref__":true,"id":"Label_A4D152C8_5A36_43B4_8E2A_8B0FC08CBA17","rev":39760}}}},"84C9FBD7-8364-4B5D-A196-231EED80B09A":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"borderRadius":{"key":"borderRadius","value":14},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"borderColor":{"key":"borderColor"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,96,82)"}}},"BB5D18FD-8D51-4460-9B9A-07FE1F64BDED":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"opacity":{"key":"opacity","value":0.5},"fontSize":{"key":"fontSize","value":11},"center":{"key":"center","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(6.5,6.5)"}}},"A5E9204A-FA44-4AF5-85A7-1E2D01D2D4BA":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"borderRadius":{"key":"borderRadius","value":14},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(182,67,0)"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,190,6)"}}},"1E9EA8A7-4A12-492F-89B0-9B69E9FB5D28":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"borderRadius":{"key":"borderRadius","value":14},"extent":{"key":"extent","value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.0,13.0)"},"borderColor":{"key":"borderColor"},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,204,0)"}}},"4293A20E-6FB2-49FD-ADEC-F8C9CBEAC3E3":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"fontColor":{"key":"fontColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(102,102,102)"}}},"1D37BE7D-9782-4063-BA10-C1046D096BAA":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"fill":{"key":"fill","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(230,230,230)"},"borderRadius":{"key":"borderRadius","value":7},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(204,204,204)"},"borderWidth":{"key":"borderWidth","value":1}}},"B1F250D1-7433-4566-90C4-7B4019EC029A":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"sourceAttrName":{"key":"sourceAttrName","value":"extent"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Morph_22274941_995C_449B_A099_D0F2F58B511B","rev":45929}},"targetMethodName":{"key":"targetMethodName","value":"bottomRight"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"CCDD535E-933C-4FA6-959A-ED7DFF7EA026","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"CCDD535E-933C-4FA6-959A-ED7DFF7EA026":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"target":{"key":"target","value":{"__ref__":true,"id":"Morph_22274941_995C_449B_A099_D0F2F58B511B","rev":45929}}}},"FFE5E6DC-5B03-4B6E-ADD1-5306C57A1624":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"doNotSerialize":{"key":"doNotSerialize","value":["isActive","converter","updater"]},"sourceObj":{"key":"sourceObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"sourceAttrName":{"key":"sourceAttrName","value":"extent"},"targetObj":{"key":"targetObj","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"targetMethodName":{"key":"targetMethodName","value":"relayoutWindowControls"},"varMapping":{"key":"varMapping","value":{"__ref__":true,"id":"19CA68C6-245A-4999-BEAA-F4156C57B855","rev":0}},"garbageCollect":{"key":"garbageCollect","value":true},"signalOnAssignment":{"key":"signalOnAssignment","value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.1"},"pathInPackage":"index.js"}}},"19CA68C6-245A-4999-BEAA-F4156C57B855":{"rev":0,"props":{"_rev":{"key":"_rev","value":0},"source":{"key":"source","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}},"target":{"key":"target","value":{"__ref__":true,"id":"Window_5A11A8F5_6B71_4BBE_A939_E25C51337DD4","rev":39827}}}}}}
}


describe("object migrations", () => {

  it("2017-04-29 button wrapper", async () => {
    // (await loadMorphFromSnapshot(migrationBlobs["2017-04-29 button wrapper"], {migrations: []})).openInWorld()
    // (await loadMorphFromSnapshot(migrationBlobs["2017-04-29 button wrapper"])).openInWorld()
    let win = await loadMorphFromSnapshot(migrationBlobs["2017-04-29 button wrapper"]),
        wrapper = win.getSubmorphNamed("button wrapper");
    expect(wrapper).is.an.object;
    expect(arr.uniq(win.buttons().map(ea => ea.owner))).equals([wrapper]);
  });

});
