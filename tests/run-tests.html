<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tests</title>
    <link type="text/css" rel="stylesheet" href="../node_modules/mocha/mocha.css" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
  </head>
  <body>
    <div id="mocha"></div>
    <script type="text/javascript" src="../node_modules/lively.ast/dist/lively.ast.bundle.es5.js"></script>
    <script type="text/javascript" src="../node_modules/babel-core/browser.js"></script>
    <script type="text/javascript" src="../node_modules/systemjs/dist/system.src.js"></script>

    <script type="text/javascript" src="helper.js"></script>
    <script type="text/javascript" src="../node_modules/mocha/mocha.js"></script>
    <script type="text/javascript" src="../node_modules/chai/chai.js"></script>
    <script type="text/javascript" >window.prevModule = window.module; window.module = {exports: {}};</script>
    <script type="text/javascript" src="../node_modules/chai-subset/lib/chai-subset.js"></script>
    <script type="text/javascript" >
      var chaiSubset = module.exports; chai.use(chaiSubset); window.module = window.prevModule;
      if (typeof initMochaPhantomJS === 'function') initMochaPhantomJS();;
      mocha.setup("bdd");
      
      var es6Support = true;
      try { eval('() => {}'); } catch (e) { es6Support = false; }

      mocha.globals([
        "script*"/*jQuery*/,
        "z",/*for "only capture whitelisted globals"*/
        "obj1", "obj2"/*for completion tests*/]);

      loadUncached(es6Support ?
        ["../dist/lively.vm.js"] : [
        "../dist/lively.vm.es5.js", "../node_modules/babel-core/browser-polyfill.js"],
        function() {
          (es6Support ? loadUncached : loadUncached_es5Compat)([
            "vm-test.js",
            "completion-test.js",
            "es6-module-loading-test.js"
          ], function() {
            // mocha.checkLeaks();
            mocha.run();
          })
        });
    </script>

  </body>
</html>
