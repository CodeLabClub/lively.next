<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tests</title>
    <link type="text/css" rel="stylesheet" href="../node_modules/mocha/mocha.css" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
  </head>
  <body>
    <div id="mocha"></div>
    <script src="../node_modules/babel-core/browser-polyfill.js"></script>
    <script src="../node_modules/systemjs/dist/system.src.js"></script>
    <script src="../index-browser.js"></script>
    <script type="text/javascript" src="helper.js"></script>

    <script>
      System._ensureES5Transpile([
        "lively.ast/lib/capturing.js",
        "lively.lang/lib/promise.js",
        "lively.lang/lib/graph.js"]);

      lively.vm.load("../")
        .then(function() {
          System.config({
            map: {
              mocha: "../node_modules/mocha/mocha.js",
              chai: "../node_modules/chai/chai.js",
              "chai-subset": "../node_modules/chai-subset/lib/chai-subset.js"
            },
            meta: {"../node_modules/mocha/mocha.js": {exports: 'mocha', format: 'global'}}
          });
        })
        .then(function() { return System.import("./es6-mocha-runner.js"); })
        .catch(function(err) {
          if (err.originalErr) err = err.originalErr
          console.error(err.message);
          console.error(err.stack);
        })
      
    </script>
  </body>
</html>
