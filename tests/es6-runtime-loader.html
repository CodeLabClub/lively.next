<html>
<body>
  <ol id="log"></ol>
  <script src="../node_modules/systemjs/dist/system.src.js"></script>
  <script src="../index-browser.js"></script>
  <script>

function show(msg) {
  console.log(msg);
  var stringified = typeof msg === "object" ? JSON.stringify(msg, null, 2) : String(msg);
  document.querySelector("#log").insertAdjacentHTML("beforeend", '<li><pre>' + stringified + '</li>');
}

var vmPath = document.location.pathname.split("/").slice(0,-2).join("/");

lively.vm.bootstrap(vmPath)
  .then(vm => {
    show("lively.vm bootstrapped...!");
    return vm.es6.runEval("Object.keys(currentSystem().__lively_vm__.loadedModules)", {targetModule: "lively.vm/lib/es6-interface.js"})
  })
  .then(result => {
    show(result);
    show("DONE")
  })
  .catch(err => {
    if (err.originalErr) err = err.originalErr;
    show(err.stack);
    console.error(err.stack);
  });

  </script>
</body>
</html>
